Is the card new? 
    yes
        set new flag to false 
        update d with reponse q (0, 1, 2, or 3)
        update I (inter-repetition interval)
        update due date 
        set due flag to false 
        if q != 0 
            increment consecutive correct count 
    no 
        update d with reponse q (0, 1, 2, or 3)
        update I (inter-repetition interval)
        update due date 
        set due flag to false 
        if q != 0 
            increment consecutive correct count
        